%% fit_and_plot.m
%  Fitting a curve and plot it out
%  author: hxp<hxp201406@gmail.com>
%  Version: MATLAB R2019b Linux

function fit_and_plot(lower_limit, upper_limit, FIT_TYPE, ...
    base_line_x_to_electron_volts_zoomed, ...
    base_line_y_zoomed, ...
    transmittance_10min_zoomed, ...
    transmittance_20min_zoomed, ...
    transmittance_30min_zoomed, ...
    transmittance_40min_zoomed)
    [fit_result0min, ~] = fit(...
        base_line_x_to_electron_volts_zoomed(lower_limit:upper_limit, 1), ...
        (log((base_line_y_zoomed(lower_limit:upper_limit, 1)...
            ./ base_line_y_zoomed(lower_limit:upper_limit, 1)).^(-1))).^2, ...
        FIT_TYPE);
    [fit_result10min, ~] = fit(...
        base_line_x_to_electron_volts_zoomed(lower_limit:upper_limit, 1), ...
        (log((transmittance_10min_zoomed(lower_limit:upper_limit, 1)...
            ./ base_line_y_zoomed(lower_limit:upper_limit, 1)).^(-1))).^2, ...
        FIT_TYPE);
    [fit_result20min, ~] = fit(...
        base_line_x_to_electron_volts_zoomed(lower_limit:upper_limit, 1), ...
        (log((transmittance_20min_zoomed(lower_limit:upper_limit, 1)...
            ./ base_line_y_zoomed(lower_limit:upper_limit, 1)).^(-1))).^2, ...
        FIT_TYPE);
    [fit_result30min, ~] = fit(...
        base_line_x_to_electron_volts_zoomed(lower_limit:upper_limit, 1), ...
        (log((transmittance_30min_zoomed(lower_limit:upper_limit, 1)...
            ./ base_line_y_zoomed(lower_limit:upper_limit, 1)).^(-1))).^2, ...
        FIT_TYPE);
    [fit_result40min, ~] = fit(...
        base_line_x_to_electron_volts_zoomed(lower_limit:upper_limit, 1), ...
        (log((transmittance_40min_zoomed(lower_limit:upper_limit, 1)...
            ./ base_line_y_zoomed(lower_limit:upper_limit, 1)).^(-1))).^2, ...
        FIT_TYPE);
    plot(fit_result0min, '--');
    plot(fit_result10min, '--');
    plot(fit_result20min, '--');
    plot(fit_result30min, '--');
    plot(fit_result40min, '--');
end